import{s as t}from"./supabase-B6KWXDKJ.js";class d{static async uploadImage(e,r="gallery"){try{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw new Error("Tipe file tidak didukung. Gunakan JPG, PNG, atau WebP.");const s=5*1024*1024;if(e.size>s)throw new Error("Ukuran file terlalu besar. Maksimal 5MB.");const i=e.name.split(".").pop(),l=`${Date.now()}-${Math.random().toString(36).substring(2)}.${i}`,c=`${r}/${l}`,{data:m,error:o}=await t.storage.from("images").upload(c,e,{cacheControl:"3600",upsert:!1});if(o)throw o;const{data:{publicUrl:n}}=t.storage.from("images").getPublicUrl(c);return{success:!0,url:n,path:c}}catch(a){return{success:!1,error:a.message}}}static async addGalleryImage(e){try{const{data:r,error:a}=await t.from("gallery_images").insert([{...e,created_at:new Date().toISOString()}]).select().single();if(a)throw a;return{success:!0,data:r}}catch(r){return{success:!1,error:r.message}}}static async getGalleryImages(){try{const{data:e,error:r}=await t.from("gallery_images").select("*").order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:e}}catch(e){return{success:!1,error:e.message}}}static async deleteGalleryImage(e){try{const{data:r}=await t.from("gallery_images").select("image_path").eq("id",e).single();r?.image_path&&await t.storage.from("images").remove([r.image_path]);const{error:a}=await t.from("gallery_images").delete().eq("id",e);if(a)throw a;return{success:!0}}catch(r){return{success:!1,error:r.message}}}static async updateGalleryImage(e,r){try{const{data:a,error:s}=await t.from("gallery_images").update(r).eq("id",e).select().single();if(s)throw s;return{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}}export{d as G};
